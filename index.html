<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MPKVIC Dashboard</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <!-- Anime.js -->
    <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

        * {
            font-family: 'Poppins', sans-serif;
        }

        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --success: #2ecc71;
            --danger: #e74c3c;
            --warning: #f39c12;
            --info: #3498db;
            --light: #ecf0f1;
            --dark: #000000;
            --teal: #1abc9c;
            --purple: #9b59b6;
        }

        body {
            overflow-x: hidden;
        }

        .dashboard-header {
            background: linear-gradient(135deg, var(--primary), #1a252f);
            color: white;
            border-radius: 10px;
            margin-bottom: 25px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            transform: translateY(-20px);
            opacity: 0;
            animation: slideDown 0.6s forwards 0.2s;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .dashboard-title span {
            color: var(--warning);
        }

        .last-updated {
            background-color: rgba(255, 255, 255, 0.1);
            padding: 8px 15px;
            border-radius: 50px;
            font-size: 14px;
        }

        .financial-year-filter {
            padding: 8px 15px;
            font-size: 14px;
        }

        .financial-year-filter select {
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--warning);
            text-shadow: 2px 3px 2px rgba(0, 0, 0, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 5px;
            padding: 5px 10px;
            font-size: 14px;
        }

        .financial-year-filter select:focus {
            outline: none;
            border-color: var(--warning);
        }

        .kpi-card {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            transform: translateY(30px);
            opacity: 0;
            height: 180px;
            background: linear-gradient(135deg, var(--light) 0%, #ffffff 100%);
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            cursor: pointer;
        }

        .kpi-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.15);
        }

        .kpi-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            transition: all 0.3s ease;
        }

        .kpi-card:hover::before {
            width: 7px;
        }

        .kpi-card.targets {
            background: linear-gradient(135deg, var(--purple) 0%, #8e44ad 100%);
            box-shadow: 0px 0px 26px -1px rgba(0, 0, 0, 0.30) inset;
        }

        /* .kpi-card.targets::before {
            background-color: var(--purple);
        } */

        .kpi-card.production {
            background: linear-gradient(135deg, var(--info) 0%, #2980b9 100%);
            box-shadow: 0px 0px 26px -1px rgba(0, 0, 0, 0.30) inset;
        }

        /* .kpi-card.production::before {
            background-color: var(--info);
        } */

        .kpi-card.sales {
            background: linear-gradient(135deg, var(--success) 0%, #27ae60 100%);
            box-shadow: 0px 0px 26px -1px rgba(0, 0, 0, 0.30) inset;
        }

        /* .kpi-card.sales::before {
            background-color: var(--success);
        } */

        .kpi-card.orders {
            background: linear-gradient(135deg, var(--warning) 0%, #e67e22 100%);
            box-shadow: 0px 0px 26px -1px rgba(0, 0, 0, 0.30) inset;
        }

        /* .kpi-card.orders::before {
            background-color: var(--warning);
        } */

        .kpi-card.stock {
            background: linear-gradient(135deg, var(--teal) 0%, #16a085 100%);
            box-shadow: 0px 0px 26px -1px rgba(0, 0, 0, 0.30) inset;
        }

        /* .kpi-card.stock::before {
            background-color: var(--teal);
        } */

        .kpi-card.low-stock {
            background: linear-gradient(135deg, #e91e63 0%, #c2185b 100%);
            box-shadow: 0px 0px 26px -1px rgba(0, 0, 0, 0.30) inset;
        }

        /* .kpi-card.low-stock::before {
            background-color: #e91e63;
        } */

        .kpi-card .kpi-title,
        .kpi-card .kpi-value,
        .kpi-card .kpi-change {
            color: #ffffff;
        }

        .kpi-value {
            text-shadow: 2px 3px 2px rgba(0, 0, 0, 0.6);
        }

        .kpi-title {
            background-color: rgba(240, 248, 255, 0.151);
            padding: 5px;
            border-radius: 5px;
            padding-left: 15px;
            margin-left: -15px;
            text-shadow: 2px 3px 2px rgba(0, 0, 0, 0.6);
        }

        .kpi-card:hover .kpi-value {
            color: #f1f1f1;
        }

        .kpi-card .kpi-change.text-success {
            color: #b2ff59;
        }

        .kpi-card .kpi-change.text-danger {
            color: #ff8a80;
        }

        .kpi-change {
            margin-top: 2rem;
        }

        .kpi-title {
            font-size: 15px;
            color: #7f8c8d;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 800;
        }

        .kpi-value {
            font-size: 24px;
            font-weight: 700;
            transition: all 0.3s ease;
        }

        .kpi-icon {
            position: absolute;
            right: 20px;
            top: 3.5rem;
            font-size: 50px;
            opacity: 0.1;
            color: #ffffff;
            transition: all 0.3s ease;
        }

        .kpi-card:hover .kpi-icon {
            opacity: 0.5;
            transform: scale(1.1);
        }

        .dashboard-card {
            height: 420px;
            overflow: hidden;
            box-shadow: 0px 0px 26px -15px rgba(0, 0, 0, 0.75) inset;
            background-color: White;

        }

        .chart-container {
            position: relative;
            height: 250px;
            width: 100%;
            margin-top: 15px;
        }

        .chart-container canvas {
            max-height: 100%;
            max-width: 100%;
            width: 100% !important;
            height: 100% !important;
        }

        .notification-list {
            max-height: 320px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .notification-list::-webkit-scrollbar {
            width: 6px;
        }

        .notification-list::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }

        .notification-list::-webkit-scrollbar-thumb {
            background: var(--secondary);
            border-radius: 3px;
        }

        .notification-list::-webkit-scrollbar-thumb:hover {
            background: #2980b9;
        }

        .notification-item {
            border-left: 4px solid var(--danger);
            transition: all 0.3s ease;
            transform: translateX(-10px);
            opacity: 0;
        }

        .notification-item:hover {
            transform: translateX(0);
        }

        .notification-item.warning {
            border-left-color: var(--warning);
        }

        .notification-item.info {
            border-left-color: var(--info);
        }

        .notification-title {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .notification-title i {
            font-size: 16px;
        }

        .notification-desc {
            font-size: 14px;
            color: #7f8c8d;
            line-height: 1.5;
        }

        .notification-time {
            font-size: 12px;
            color: #949494;
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(46, 204, 113, 0.4);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(46, 204, 113, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(46, 204, 113, 0);
            }
        }

        @keyframes slideDown {
            from {
                transform: translateY(-20px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Modal Styles */
        .modal-content {
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            border: none;
            max-width: 90vw;
            margin: auto;
        }

        .modal-header {
            background: linear-gradient(135deg, var(--purple), #8e44ad);
            color: #ffffff;
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
            border-bottom: none;
            padding: 1.5rem;
        }

        .modal-title {
            font-weight: 600;
            font-size: 1.5rem;
        }

        .modal-body {
            padding: 1.5rem;
            background-color: var(--light);
            width: 100%;
            overflow-x: auto;
        }

        .modal-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px;
        }

        .modal-table th,
        .modal-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
            white-space: normal;
            overflow-wrap: break-word;
            min-width: 100px;
            max-width: 200px;
        }

        .modal-table th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: var(--dark);
        }

        .modal-table tr:last-child td {
            font-weight: 700;
            color: #000000;
        }

        .modal-table tr:hover {
            background-color: #f1f1f1;
        }

        .modal-table tr.success-row {
            background-color: var(--success);
            /* Bootstrap success green */
        }

        .modal-table tr.warning-row {
            background-color: var(--warning);
            /* Bootstrap warning yellow */
        }

        .modal-table tr.danger-row {
            background-color: var(--danger);
            /* Bootstrap danger red */
        }

        .modal-table tr:last-child {
            background-color: transparent !important;
            /* Override for total row */
        }

        .modal-footer {
            border-top: none;
            padding: 1rem;
            background-color: var(--light);
        }

        .btn-close {
            filter: invert(1);
        }

        @media (min-width: 768px) {
            .modal-table {
                font-size: 14px;
            }
        }

        @media (min-width: 768px) {
            .modal-table {
                font-size: 14px;
                /* Restore original font size on larger screens */
            }
        }

        @media (max-width: 768px) {
            .dashboard-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .kpi-card {
                height: auto;
                min-height: 150px;
            }

            .dashboard-card {
                height: auto;
                min-height: 350px;
            }

            .chart-container {
                height: 250px;
            }

            .modal-table {
                font-size: 12px;
            }

            .modal-table th,
            .modal-table td {
                padding: 8px;
            }
        }

        @media (max-width: 576px) {
            .kpi-value {
                font-size: 20px;
            }

            .kpi-title {
                font-size: 13px;
            }

            .chart-container {
                height: 200px;
            }

            .modal-table {
                font-size: 10px;
            }
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            /* margin-left: 20px; */

        }

        .user-info img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid White;
            padding: 2px;
        }

        .btn-sm {
            --bs-btn-padding-y: 0.15rem !important;
            --bs-btn-padding-x: 0.2rem !important;
            --bs-btn-font-size: 0.775rem !important;
            --bs-btn-border-radius: var(--bs-border-radius-sm);
        }

        .model {
            max-width: 800px !important;
        }
    </style>
</head>

<body>
    <div class="container-fluid">
        <div class="dashboard-header p-3 mb-4 mt-2">
            <div class="financial-year-filter">
                <label for="financial-year">Financial Year:</label>
                <select id="financial-year">
                    <option value="2024-25">2024-25</option>
                    <option value="2025-26" selected>2025-26</option>
                </select>
            </div>
            <div class="d-flex gap-2">
                <img class="" src="Khadi Logo.png" height="50px">
                <h1 class="dashboard-title display-6 ">MP <span>KVIC</span> Dashboard</h1>
            </div>
            <!-- <div class="last-updated d-flex "><i class="fas fa-sync-alt"></i> Last updated: <span id="current-date"></span> -->
            <div class="last-updated user-info">
                <img src="user.jpg" alt="User Profile">
                <span id="user-title" style="cursor: pointer;">Managing Director</span>
            </div>
        </div>
    </div>

    <!-- KPI Cards Section -->
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-6 g-3 mb-2 px-3" id="kpi-container">
        <div class="col">
            <div class="kpi-card targets card p-4" data-bs-toggle="modal" data-bs-target="#targetsModal">
                <div class="kpi-title">Allocated Targets <small>(lakhs)</small></div>
                <div>
                    <div class="text-light">Production: <span class="kpi-value" id="target-production">1080</span></div>
                    <div class="text-light">Emporium: <span class="kpi-value" id="target-emporium">800</span></div>
                    <div class="text-light">Warehouse: <span class="kpi-value" id="target-warehouse">1200</span></div>
                </div>
                <div class="kpi-icon">
                    <i class="fas fa-bullseye"></i>
                </div>
                <button class="btn btn-sm btn-outline-light position-absolute bottom-0 end-0 m-3">View More >></button>
            </div>
        </div>
        <div class="col">
            <div class="kpi-card production card p-4" data-bs-toggle="modal" data-bs-target="#productionModal">
                <div class="kpi-title">Production <br><small>(Achieved Target)</small></div>
                <div class="kpi-value py-3">₹ <span id="production-value">0</span> <span class="fs-5">Lakhs</span></div>
                <div class="kpi-icon">
                    <i class="fas fa-rupee-sign"></i>
                </div>
                <button class="btn btn-sm btn-outline-light position-absolute bottom-0 end-0 m-3">View More >></button>
            </div>
        </div>
        <div class="col">
            <div class="kpi-card sales card p-4" data-bs-toggle="modal" data-bs-target="#salesModal">
                <div class="kpi-title">Emporium Sales</div>
                <div class="kpi-value py-3">₹ <span id="sales-value">0</span> <span class="fs-5">Lakhs</span></div>
                <div class="kpi-icon">
                    <i class="fas fa-rupee-sign"></i>
                </div>
                <button class="btn btn-sm btn-outline-light position-absolute bottom-0 end-0 m-3">View More >></button>
            </div>
        </div>
        <div class="col">
            <div class="kpi-card orders card p-4" data-bs-toggle="modal" data-bs-target="#ordersModal">
                <div class="kpi-title">Demand Details (internal)</div>
                <div class="kpi-value py-3"><span id="orders-value">0</span> <span class="fs-5">Offices</span></div>
                <div class="kpi-icon">
                    <i class="fas fa-clipboard-list"></i>
                </div>
                <button class="btn btn-sm btn-outline-light position-absolute bottom-0 end-0 m-3">View More >></button>
            </div>
        </div>
        <div class="col">
            <div class="kpi-card stock card p-4" data-bs-toggle="modal" data-bs-target="#stockModal">
                <div class="kpi-title">Finished Product</div>
                <div class="kpi-value py-3"><span id="stock-value">0</span> <span class="fs-5">Units</span></div>
                <div class="kpi-icon">
                    <i class="fas fa-boxes"></i>
                </div>
                <button class="btn btn-sm btn-outline-light position-absolute bottom-0 end-0 m-3">View More >></button>
            </div>
        </div>
        <div class="col">
            <div class="kpi-card low-stock card p-4" data-bs-toggle="modal" data-bs-target="#lowStockModal">
                <div class="kpi-title">Low Stock Alert</div>
                <div class="kpi-value py-3"><span id="lowstock-value">5</span> <span class="fs-5">Offices</span></div>
                <div class="kpi-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <button class="btn btn-sm btn-outline-light position-absolute bottom-0 end-0 m-3">View More >></button>
            </div>
        </div>
    </div>

    <!-- Modal for Allocated Targets -->
    <div class="modal fade" id="targetsModal" tabindex="-1" aria-labelledby="targetsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="targetsModalLabel">Allocated Targets (Lakhs)</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <table class="modal-table">
                        <thead>
                            <tr>
                                <th>क्र.</th>
                                <th>एम्पोरियम का नाम</th>
                                <th>वार्षिक लक्ष्य (लाख में)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>खादी ग्रामोद्योग एम्पोरियम, एम.पी. नगर</td>
                                <td>80</td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>खादी ग्रामोद्योग एम्पोरियम भोपाल हॉट</td>
                                <td>50</td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>खादी ग्रामोद्योग एम्पोरियम मालवीय नगर, विकय केन्द्र, पचमढ़ी</td>
                                <td>15</td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>खादी ग्रामोद्योग एम्पोरियम, जवाहर चौक</td>
                                <td>80</td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>खादी ग्रामोद्योग एम्पोरियम रविशंकर नगर</td>
                                <td>20</td>
                            </tr>
                            <tr>
                                <td>6</td>
                                <td>खादी ग्रामोद्योग एम्पोरियम, नर्मदापुरम</td>
                                <td>20</td>
                            </tr>
                            <tr>
                                <td>7</td>
                                <td>खादी ग्रामोद्योग एम्पोरियम, इंदौर</td>
                                <td>80</td>
                            </tr>
                            <tr>
                                <td>8</td>
                                <td>खादी ग्रामोद्योग एम्पोरियम, सागर</td>
                                <td>15</td>
                            </tr>
                            <tr>
                                <td>9</td>
                                <td>खादी ग्रामोद्योग एम्पोरियम, खरगौन</td>
                                <td>25</td>
                            </tr>
                            <tr>
                                <td>10</td>
                                <td>खादी ग्रामोद्योग एम्पोरियम, उज्जैन</td>
                                <td>55</td>
                            </tr>
                            <tr>
                                <td>11</td>
                                <td>खादी ग्रामोद्योग एम्पोरियम, देवास</td>
                                <td>40</td>
                            </tr>
                            <tr>
                                <td>12</td>
                                <td>खादी ग्रामोद्योग एम्पोरियम, नीमच</td>
                                <td>50</td>
                            </tr>
                            <tr>
                                <td>13</td>
                                <td>खादी ग्रामोद्योग एम्पोरियम, ग्वालियर</td>
                                <td>80</td>
                            </tr>
                            <tr>
                                <td>14</td>
                                <td>खादी ग्रामोद्योग एम्पोरियम, मुरैना</td>
                                <td>15</td>
                            </tr>
                            <tr>
                                <td>15</td>
                                <td>खादी ग्रामोद्योग एम्पोरियम, जबलपुर</td>
                                <td>80</td>
                            </tr>
                            <tr>
                                <td>16</td>
                                <td>खादी ग्रामोद्योग एम्पोरियम, रीवा</td>
                                <td>60</td>
                            </tr>
                            <tr>
                                <td>17</td>
                                <td>खादी ग्रामोद्योग एम्पोरियम, शहडोल</td>
                                <td>15</td>
                            </tr>
                            <tr>
                                <td>18</td>
                                <td>कम्बल केन्द्र, मंदसौर विक्रय केन्द्र</td>
                                <td>20</td>
                            </tr>
                            <tr>
                                <td>19</td>
                                <td>केन्द्रीय खादी वस्त्रागार, भोपाल</td>
                                <td>1200</td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>योग</td>
                                <td>2000</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Total Production -->
    <div class="modal fade" id="productionModal" tabindex="-1" aria-labelledby="productionModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="productionModalLabel">Total Production Details (Lakhs)</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <table class="modal-table">
                        <thead>
                            <tr>
                                <th>क्र.</th>
                                <th>उत्पादन केन्द्र</th>
                                <th>लक्ष्य (लाख में)</th>
                                <th>उत्पादन (लाख में)</th>
                                <th>प्रतिशत पूर्ति</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>कम्बल केंद्र, ग्वालियर</td>
                                <td>120</td>
                                <td>80</td>
                                <td>66.67%</td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>कम्बल केंद्र, मंदसौर</td>
                                <td>100</td>
                                <td>88</td>
                                <td>88.00%</td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>कम्बल केंद्र, टीकमगढ़</td>
                                <td>30</td>
                                <td>22</td>
                                <td>73.33%</td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>कम्बल केंद्र, छिंदवाड़ा</td>
                                <td>30</td>
                                <td>30</td>
                                <td>100.00%</td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>खादी उत्पादन केंद्र, ग्वालियर</td>
                                <td>100</td>
                                <td>85</td>
                                <td>85.00%</td>
                            </tr>
                            <tr>
                                <td>6</td>
                                <td>खादी उत्पादन केंद्र, खरगौन</td>
                                <td>85</td>
                                <td>30</td>
                                <td>35.29%</td>
                            </tr>
                            <tr>
                                <td>7</td>
                                <td>खादी उत्पादन केंद्र, बैतुल</td>
                                <td>85</td>
                                <td>50</td>
                                <td>58.82%</td>
                            </tr>
                            <tr>
                                <td>8</td>
                                <td>खादी उत्पादन केंद्र, इन्दौर</td>
                                <td>85</td>
                                <td>33</td>
                                <td>38.82%</td>
                            </tr>
                            <tr>
                                <td>9</td>
                                <td>खादी उत्पादन केंद्र, देवास</td>
                                <td>85</td>
                                <td>40</td>
                                <td>47.06%</td>
                            </tr>
                            <tr>
                                <td>10</td>
                                <td>पोलीवस्त्र उत्पादन केंद्र, टीकमगढ़</td>
                                <td>55</td>
                                <td>51</td>
                                <td>92.73%</td>
                            </tr>
                            <tr>
                                <td>11</td>
                                <td>पोलीवस्त्र उत्पादन केंद्र, उज्जैन</td>
                                <td>85</td>
                                <td>47</td>
                                <td>55.29%</td>
                            </tr>
                            <tr>
                                <td>12</td>
                                <td>रेशम केंद्र महेश्वर, खरगौन</td>
                                <td>60</td>
                                <td>59</td>
                                <td>98.33%</td>
                            </tr>
                            <tr>
                                <td>13</td>
                                <td>रेशम केंद्र महेश्वर, महेश्वर</td>
                                <td>60</td>
                                <td>31</td>
                                <td>51.67%</td>
                            </tr>
                            <tr>
                                <td>14</td>
                                <td>चर्म शिवण केंद्र, देवास</td>
                                <td>100</td>
                                <td>84</td>
                                <td>84.00%</td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>योग</td>
                                <td>1080</td>
                                <td>710</td>
                                <td>65.74%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Total Sales -->
    <div class="modal fade" id="salesModal" tabindex="-1" aria-labelledby="salesModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="salesModalLabel">Emporium Sales Details (Lakhs)</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <table class="modal-table">
                    <thead>
                        <tr>
                            <th>क्र.</th>
                            <th>एम्पोरियम का नाम</th>
                            <th>लक्ष्य (लाख में)</th>
                            <th>बिक्री (लाख में)</th>
                            <th>प्रतिशत पूर्ति</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>खादी ग्रामोद्योग एम्पोरियम, एम.पी. नगर</td>
                            <td>80</td>
                            <td>70</td>
                            <td>87.50%</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>खादी ग्रामोद्योग एम्पोरियम भोपाल हॉट</td>
                            <td>50</td>
                            <td>24</td>
                            <td>48.00%</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>खादी ग्रामोद्योग एम्पोरियम मालवीय नगर, विकय केन्द्र, पचमढ़ी</td>
                            <td>15</td>
                            <td>5</td>
                            <td>33.33%</td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>खादी ग्रामोद्योग एम्पोरियम, जवाहर चौक</td>
                            <td>80</td>
                            <td>75</td>
                            <td>93.75%</td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td>खादी ग्रामोद्योग एम्पोरियम रविशंकर नगर</td>
                            <td>20</td>
                            <td>0</td>
                            <td>0.00%</td>
                        </tr>
                        <tr>
                            <td>6</td>
                            <td>खादी ग्रामोद्योग एम्पोरियम, नर्मदापुरम</td>
                            <td>20</td>
                            <td>0</td>
                            <td>0.00%</td>
                        </tr>
                        <tr>
                            <td>7</td>
                            <td>खादी ग्रामोद्योग एम्पोरियम, इंदौर</td>
                            <td>80</td>
                            <td>65</td>
                            <td>81.25%</td>
                        </tr>
                        <tr>
                            <td>8</td>
                            <td>खादी ग्रामोद्योग एम्पोरियम, सागर</td>
                            <td>15</td>
                            <td>0</td>
                            <td>0.00%</td>
                        </tr>
                        <tr>
                            <td>9</td>
                            <td>खादी ग्रामोद्योग एम्पोरियम, खरगौन</td>
                            <td>25</td>
                            <td>0</td>
                            <td>0.00%</td>
                        </tr>
                        <tr>
                            <td>10</td>
                            <td>खादी ग्रामोद्योग एम्पोरियम, उज्जैन</td>
                            <td>55</td>
                            <td>11</td>
                            <td>20.00%</td>
                        </tr>
                        <tr>
                            <td>11</td>
                            <td>खादी ग्रामोद्योग एम्पोरियम, देवास</td>
                            <td>40</td>
                            <td>0</td>
                            <td>0.00%</td>
                        </tr>
                        <tr>
                            <td>12</td>
                            <td>खादी ग्रामोद्योग एम्पोरियम, नीमच</td>
                            <td>50</td>
                            <td>0</td>
                            <td>0.00%</td>
                        </tr>
                        <tr>
                            <td>13</td>
                            <td>खादी ग्रामोद्योग एम्पोरियम, ग्वालियर</td>
                            <td>80</td>
                            <td>70</td>
                            <td>87.50%</td>
                        </tr>
                        <tr>
                            <td>14</td>
                            <td>खादी ग्रामोद्योग एम्पोरियम, मुरैना</td>
                            <td>15</td>
                            <td>12</td>
                            <td>80.00%</td>
                        </tr>
                        <tr>
                            <td>15</td>
                            <td>खादी ग्रामोद्योग एम्पोरियम, जबलपुर</td>
                            <td>80</td>
                            <td>10</td>
                            <td>12.50%</td>
                        </tr>
                        <tr>
                            <td>16</td>
                            <td>खादी ग्रामोद्योग एम्पोरियम, रीवा</td>
                            <td>60</td>
                            <td>0</td>
                            <td>0.00%</td>
                        </tr>
                        <tr>
                            <td>17</td>
                            <td>खादी ग्रामोद्योग एम्पोरियम, शहडोल</td>
                            <td>15</td>
                            <td>0</td>
                            <td>0.00%</td>
                        </tr>
                        <tr>
                            <td>18</td>
                            <td>कम्बल केन्द्र, मंदसौर विक्रय केन्द्र</td>
                            <td>20</td>
                            <td>0</td>
                            <td>0.00%</td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>योग</td>
                            <td>800</td>
                            <td>292</td>
                            <td>36.50%</td>
                        </tr>
                    </tbody>
                </table>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Generated Demand -->
    <div class="modal fade" id="ordersModal" tabindex="-1" aria-labelledby="ordersModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="ordersModalLabel">Generated Demand Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <table class="modal-table">
                        <thead>
                            <tr>
                                <th>क्र.</th>
                                <th>कार्यालय का नाम</th>
                                <th>मांग संख्या</th>
                                <th>मांग तिथि</th>
                                <th>मांग प्रकार</th>
                                <th>कुल मात्रा</th>
                                <th>उत्पाद</th>
                                <th>समाप्त उत्पाद मांग राशि</th>
                                <th>मशीनरी का नाम</th>
                                <th>मांग राशि</th>
                                <th>स्थिति</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>Jawahar Chowk Emporium</td>
                                <td>JCE/2025/EMP/0001</td>
                                <td>-</td>
                                <td>-</td>
                                <td>250</td>
                                <td>Khadi Stoles</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                                <td>Pending</td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>Khadi Gramodhyog Morena</td>
                                <td>KGM/2025/EMP/1365</td>
                                <td>-</td>
                                <td>-</td>
                                <td>150</td>
                                <td>Gents Kurta</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                                <td>Confirmed</td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>Kambal Utpadan Kendra, Gwalior</td>
                                <td>PU/GWL/2025/FP/1458</td>
                                <td>-</td>
                                <td>-</td>
                                <td>200</td>
                                <td>Saree Kosa</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                                <td>Processing</td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>Kambal Utpadan Kendra Tikamgarh</td>
                                <td>PU/KUT/2025/FP/7451</td>
                                <td>-</td>
                                <td>-</td>
                                <td>180</td>
                                <td>Woolen Jacket</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                                <td>Confirmed</td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>Silk Centre Production Unit Maheshwar Khargone</td>
                                <td>PU/KHR/2025/RAW/74457</td>
                                <td>-</td>
                                <td>-</td>
                                <td>120</td>
                                <td>Kurta Regular</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                                <td>Pending</td>
                            </tr>
                            <tr>
                                <td>6</td>
                                <td>Jawahar Chowk Emporium</td>
                                <td>D2025/PU/07/10365</td>
                                <td>6/25/2025</td>
                                <td>Finished Product</td>
                                <td>105</td>
                                <td>-</td>
                                <td>148756.36</td>
                                <td>-</td>
                                <td>-</td>
                                <td>Pending</td>
                            </tr>
                            <tr>
                                <td>7</td>
                                <td>Kambal Utpadan Kendra Gwalior</td>
                                <td>D2025/PU/07/10365</td>
                                <td>6/28/2025</td>
                                <td>Raw Material</td>
                                <td>250</td>
                                <td>-</td>
                                <td>748569886.3</td>
                                <td>-</td>
                                <td>-</td>
                                <td>Processing</td>
                            </tr>
                            <tr>
                                <td>8</td>
                                <td>Polyvastra Utpadan Kendra Tikamgarh</td>
                                <td>D2025/PU/07/10025</td>
                                <td>6/30/2025</td>
                                <td>Machinery</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                                <td>Bleaching/Dyeing machines</td>
                                <td>-</td>
                                <td>Confirmed</td>
                            </tr>
                            <tr>
                                <td>9</td>
                                <td>Khadi Utpadan Kendra Indore</td>
                                <td>D2025/PU/07/10365</td>
                                <td>6/27/2025</td>
                                <td>Amount</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                                <td>1056983</td>
                                <td>Confirmed</td>
                            </tr>
                            <tr>
                                <td>10</td>
                                <td>Kendriya Khadi Vastragaar Govindpura</td>
                                <td>D2025/PU/07/10025</td>
                                <td>6/29/2025</td>
                                <td>Amount</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                                <td>1136983</td>
                                <td>Confirmed</td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>योग</td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td>1255</td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Finished Product -->
    <div class="modal fade" id="stockModal" tabindex="-1" aria-labelledby="stockModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="stockModalLabel">Finished Product Stock Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <table Class="modal-table">
                        <thead>
                            <tr>
                                <th>क्र.</th>
                                <th>कार्यालय का नाम</th>
                                <th>उत्पाद</th>
                                <th>स्टॉक मात्रा (इकाइयाँ)</th>
                                <th>न्यूनतम स्टॉक सीमा</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td rowspan="2">1</td>
                                <td rowspan="2">Jawahar Chowk Emporium</td>
                                <td>LONG KURTA PLAIN HS</td>
                                <td>45</td>
                                <td>6</td>
                            </tr>
                            <tr>
                                <td>LONG KURTA -WHITE HS</td>
                                <td>65</td>
                                <td>4</td>
                            </tr>
                            <tr>
                                <td rowspan="2">2</td>
                                <td rowspan="2">Khadi Gramodhyog Indore</td>
                                <td>SHORT KURTA WHITE FS</td>
                                <td>40</td>
                                <td>7</td>
                            </tr>
                            <tr>
                                <td>SHIRT WHITE FS</td>
                                <td>45</td>
                                <td>5</td>
                            </tr>
                            <tr>
                                <td rowspan="2">3</td>
                                <td rowspan="2">Khadi Gramodhyog Morena</td>
                                <td>SHIRT PLAIN HS</td>
                                <td>36</td>
                                <td>5</td>
                            </tr>
                            <tr>
                                <td>PYJAMA ZIPPER</td>
                                <td>12</td>
                                <td>5</td>
                            </tr>
                            <tr>
                                <td rowspan="3">4</td>
                                <td rowspan="3">Centrial Warehouse Govindpura</td>
                                <td>SAREE SCREEN PRINT</td>
                                <td>93</td>
                                <td>10</td>
                            </tr>
                            <tr>
                                <td>DESIGNER KURTA L PLAIN FS</td>
                                <td>523</td>
                                <td>15</td>
                            </tr>
                            <tr>
                                <td>NANDANA PRINT</td>
                                <td>205</td>
                                <td>18</td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>योग</td>
                                <td></td>
                                <td>1064</td>
                                <td>75</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Low Stock Alert -->
    <div class="modal fade" id="lowStockModal" tabindex="-1" aria-labelledby="lowStockModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="lowStockModalLabel">Low Stock Alert Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <table class="modal-table">
                        <thead>
                            <tr>
                                <th>क्र.</th>
                                <th>कार्यालय का नाम</th>
                                <th>उत्पाद का प्रकार</th>
                                <th>उत्पाद</th>
                                <th>स्टॉक मात्रा (इकाइयाँ)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td rowspan="2">1</td>
                                <td rowspan="2">Production Unit Gwalior (EDIBLE OIL)</td>
                                <td rowspan="2">RAW MATERIAL</td>
                                <td>SARSO DANA</td>
                                <td>30 kg</td>
                            </tr>
                            <tr>
                                <td>SARSO KHALI</td>
                                <td>10 kg</td>
                            </tr>
                            <tr>
                                <td rowspan="3">2</td>
                                <td rowspan="3">Kambal Utpadan Kendra Tikamgarh</td>
                                <td rowspan="3">RAW MATERIAL</td>
                                <td>35 COUNT PONI SEHORE</td>
                                <td>11 kg</td>
                            </tr>
                            <tr>
                                <td>YARN SINGLE 35 COUNT SEHORE</td>
                                <td>12 kg</td>
                            </tr>
                            <tr>
                                <td>YARN SINGLE 100 COUNT SEHORE</td>
                                <td>13 kg</td>
                            </tr>
                            <tr>
                                <td rowspan="2">3</td>
                                <td rowspan="2">Khadi Gramodhyog Morena</td>
                                <td rowspan="2">RAW MATERIAL</td>
                                <td>Raw silk 20/22 deniar Twisted Warp 2 Ply</td>
                                <td>14 kg</td>
                            </tr>
                            <tr>
                                <td>Raw Silk 20/22 Deniar Single yarn West Bengal</td>
                                <td>15 kg</td>
                            </tr>
                            <tr>
                                <td rowspan="2">4</td>
                                <td rowspan="2">Jawahar Chowk Emporium</td>
                                <td rowspan="2">Finish Product</td>
                                <td>LONG KURTA PLAIN HS</td>
                                <td>3 Nos</td>
                            </tr>
                            <tr>
                                <td>LONG KURTA -WHITE HS</td>
                                <td>1 Nos</td>
                            </tr>
                            <tr>
                                <td rowspan="2">5</td>
                                <td rowspan="2">Khadi Gramodhyog Indore</td>
                                <td rowspan="2">Finish Product</td>
                                <td>SHORT KURTA WHITE FS</td>
                                <td>4 Nos</td>
                            </tr>
                            <tr>
                                <td>SHIRT WHITE FS</td>
                                <td>5 Nos</td>
                            </tr>
                            <tr>
                                <td></td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Dashboard Sections -->
    <div class="row g-3 mb-5 p-3" id="dashboard-container">
        <!-- Top 5 / Below 5 Finished Products Sales -->
        <div class="col-md-4">
            <div class="dashboard-card card  p-4">
                <div class="card-header d-flex justify-content-between align-items-center border-bottom pb-3">
                    <h5 class="card-title mb-0" id="finishedProductsTitle">Top 5 Finished Products Sales</h5>
                    <div class="d-flex gap-2">
                        <button class="btn btn-outline-secondary btn-sm" id="finished-toggle-btn"
                            data-toggle="top">Below 5</button>
                        <button class="btn btn-outline-secondary btn-sm" id="monthly-btn"><i
                                class="fas fa-calendar-week"></i> Monthly</button>
                        <button class="btn btn-outline-secondary btn-sm" id="quarterly-btn"><i
                                class="fas fa-calendar-alt"></i> Quarterly</button>
                        <button class="btn btn-primary btn-sm" id="yearly-btn"><i class="fas fa-calendar-day"></i>
                            Yearly</button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="chart-container">
                        <canvas id="finishedProductsChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Top 5 / Below 5 Vidhya Velley Sales -->
        <div class="col-md-4">
            <div class="dashboard-card card  p-4">
                <div class="card-header d-flex justify-content-between align-items-center border-bottom pb-3">
                    <h5 class="card-title mb-0" id="vindhyavalley">Top 5 Vindhya Valley Sales</h5>
                    <div class="d-flex gap-2">
                        <!-- <button class="btn btn-outline-secondary btn-sm" id="finished-toggle-btn"
                            data-toggle="top">Toggle to Below 5</button>
                        <button class="btn btn-outline-secondary btn-sm" id="monthly-btn"><i
                                class="fas fa-calendar-week"></i> Monthly</button>
                        <button class="btn btn-outline-secondary btn-sm" id="quarterly-btn"><i
                                class="fas fa-calendar-alt"></i> Quarterly</button>
                        <button class="btn btn-primary btn-sm" id="yearly-btn"><i class="fas fa-calendar-day"></i>
                            Yearly</button> -->
                    </div>
                </div>
                <div class="card-body">
                    <div class="chart-container">
                        <canvas id="vindhyavalleyChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notification Card -->
        <div class="col-md-4">
            <div class="dashboard-card card p-4">
                <div class="card-header d-flex justify-content-between align-items-center border-bottom pb-3">
                    <h5 class="card-title mb-0">Notifications & Alerts</h5>
                    <div class="d-flex gap-2">
                        <i class="fas fa-bell mt-2" style="--fa-animation-duration: 2s;"></i>
                        <button class="btn btn-outline-secondary btn-sm" id="mark-read-btn"><i
                                class="fas fa-check-double"></i> Mark All Read</button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="notification-list" id="notification-list">
                        <div class="notification-item warning card mb-3 p-2" data-notification-id="1"
                            data-demand-number="PU/2025/10254" data-emporium="Gwalior">
                            <div class="notification-title"><i class="fas fa-exclamation-triangle"></i> Kambal Utpadan
                                Kendra, Gwalior</div>
                            <div class="d-flex justify-content-between">
                                <div class="notification-desc">the purchase for the above demand has been
                                    placed.<br><strong>Demand Number: PU/2025/10254</strong></div>
                                <div class="notification-time">5 hours Ago</div>
                            </div>
                        </div>
                        <div class="notification-item info card mb-3 p-2" data-notification-id="2"
                            data-demand-number="HO/MARKETING/00215" data-emporium="None">
                            <div class="notification-title"><i class="fas fa-clipboard-check"></i> MP Khadi Department
                                work order HO/MARKETING/00215</div>
                            <div class="d-flex justify-content-between">
                                <div class="notification-desc">the purchase for the above demand has been placed</div>
                                <div class="notification-time">2 hours Ago</div>
                            </div>
                        </div>
                        <div class="notification-item card mb-3 p-2" data-notification-id="3"
                            data-demand-number="PU/2025/10254" data-emporium="Gwalior">
                            <div class="notification-title"><i class="fas fa-box-open"></i> Kambal Utpadan Kendra,
                                Gwalior</div>
                            <div class="d-flex justify-content-between">
                                <div class="notification-desc">Supplier has supplied the raw material
                                    for<br><strong>Demand Number: PU/2025/10254</strong></div>
                                <div class="notification-time">1 day ago</div>
                            </div>
                        </div>
                        <div class="notification-item warning card mb-3 p-2" data-notification-id="4"
                            data-demand-number="PU/2025/10260" data-emporium="Mandsaur">
                            <div class="notification-title"><i class="fas fa-exclamation-triangle"></i> Kambal Utpadan
                                Kendra, Mandsaur</div>
                            <div class="d-flex justify-content-between">
                                <div class="notification-desc">the purchase for the above demand has been
                                    placed.<br><strong>Demand Number: PU/2025/10260</strong></div>
                                <div class="notification-time">5 hours Ago</div>
                            </div>
                        </div>
                        <div class="notification-item card mb-3 p-2" data-notification-id="5"
                            data-demand-number="PU/2025/10254" data-emporium="Gwalior">
                            <div class="notification-title"><i class="fas fa-box-open"></i> Kambal Utpadan Kendra,
                                Gwalior</div>
                            <div class="d-flex justify-content-between">
                                <div class="notification-desc">Supplier has supplied the raw material
                                    for<br><strong>Demand Number: PU/2025/10254</strong></div>
                                <div class="notification-time">1 day ago</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Category Wise Sales -->
        <div class="col-md-4">
            <div class="dashboard-card card  p-4">
                <div class="card-header d-flex justify-content-between align-items-center border-bottom pb-3">
                    <h5 class="card-title mb-0" id="vindhyavalley">Main Category Wise Sales</h5>
                    <div class="d-flex gap-2">
                        <!-- <button class="btn btn-outline-secondary btn-sm" id="finished-toggle-btn"
                            data-toggle="top">Toggle to Below 5</button>
                        <button class="btn btn-outline-secondary btn-sm" id="monthly-btn"><i
                                class="fas fa-calendar-week"></i> Monthly</button>
                        <button class="btn btn-outline-secondary btn-sm" id="quarterly-btn"><i
                                class="fas fa-calendar-alt"></i> Quarterly</button>
                        <button class="btn btn-primary btn-sm" id="yearly-btn"><i class="fas fa-calendar-day"></i>
                            Yearly</button> -->
                    </div>
                </div>
                <div class="card-body">
                    <div class="chart-container">
                        <canvas id="categorywisesaleChart"></canvas>
                    </div>
                </div>
            </div>
        </div>





        <!-- Top 5 / Below 5 Emporium Wise Sales -->
        <div class="col-md-4">
            <div class="dashboard-card card  p-4">
                <div class="card-header d-flex justify-content-between align-items-center border-bottom pb-3">
                    <h5 class="card-title mb-0" id="emporiumSalesTitle">Top 5 Emporium Wise Sales</h5>
                    <div class="d-flex gap-2">
                        <button class="btn btn-outline-secondary btn-sm" id="emporium-toggle-btn"
                            data-toggle="top">Below 5</button>
                        <!-- <button class="btn btn-outline-secondary btn-sm" id="quantity-btn"><i
                                class="fas fa-box-open"></i> By Quantity</button>
                        <button class="btn btn-primary btn-sm" id="revenue-btn"><i class="fas fa-money-bill-wave"></i>
                            By Revenue</button> -->
                    </div>
                </div>
                <div class="card-body">
                    <div class="chart-container">
                        <canvas id="emporiumSalesChart"></canvas>
                    </div>
                </div>
            </div>
        </div>



        <!-- Modal for Notification Details -->
        <div class="modal fade" id="notificationModal" tabindex="-1" aria-labelledby="notificationModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="notificationModalLabel"> <i class="fas fa-bell me-2 text-light"></i>
                            Notification Details</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="notification-card">
                            <!-- <h6><i class="fas fa-bell me-2 text-primary"></i></h6> -->
                            <p><strong>Title:</strong> <span id="modal-title"></span></p>
                            <p><strong>Description:</strong> <span id="modal-desc"></span></p>
                            <p><strong>Demand Number:</strong> <span id="modal-demand" class="badge"></span></p>
                            <p><strong>Time:</strong> <span id="modal-time"></span></p>
                        </div>
                        <div class="sales-card" id="modal-sales-data"></div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" id="dismiss-notification">Dismiss</button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <!-- <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                            data-bs-target="#salesModal">View All Sales</button> -->
                    </div>
                </div>
            </div>
        </div>



        <!-- Order vs Supply -->
        <div class="col-md-4">
            <div class="dashboard-card card  p-4">
                <div class="card-header d-flex justify-content-between align-items-center border-bottom pb-3">
                    <h5 class="card-title mb-0">Other Department Order Vs Supply</h5>
                    <div class="d-flex gap-2">
                        <!-- <button class="btn btn-primary btn-sm" id="by-self-btn"><i class="fas fa-money-bill-wave"></i>
                            By Other Department</button> -->
                    </div>
                </div>
                <div class="card-body">
                    Total Orders :- <span id="total-orders" class="fw-bold">0</span> No's
                    <div class="chart-container">
                        <canvas id="ordervssupplyChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Processing Center Details -->
        <div class="col-md-6">
            <div class="dashboard-card card  p-4">
                <div class="card-header d-flex justify-content-between align-items-center border-bottom pb-3">
                    <h5 class="card-title mb-0">Processing Center Details</h5>
                    <div class="d-flex gap-2">
                        <!-- <button class="btn btn-outline-secondary btn-sm" id="production-btn"><i
                                class="fas fa-industry"></i> Production</button>
                        <button class="btn btn-primary btn-sm" id="stock-btn"><i class="fas fa-boxes"></i>
                            Stock</button> -->
                    </div>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover" id="plant-table">
                            <thead>
                                <tr>
                                    <th>Production Center Name</th>
                                    <th>Dispatch Qty</th>
                                    <th>Received Qty</th>
                                    <th>Remaining Qty</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr data-bs-toggle="modal" data-bs-target="#modalGwaliorKambal">
                                    <td><i class="fas fa-map-marker-alt me-2"></i> <a href="#"
                                            style="color: #007bff; text-decoration: none;">Kambal Kendra, Gwalior</a>
                                    </td>
                                    <td>1,500</td>
                                    <td>540</td>
                                    <td>960</td>
                                </tr>
                                <tr data-bs-toggle="modal" data-bs-target="#modalIndoreKhadi">
                                    <td><i class="fas fa-map-marker-alt me-2"></i> <a href="#"
                                            style="color: #007bff; text-decoration: none;">Khadi Production Centre,
                                            Indore</a></td>
                                    <td>1,200</td>
                                    <td>150</td>
                                    <td>1080</td>
                                </tr>
                                <tr data-bs-toggle="modal" data-bs-target="#modalUjjainPolytextile">
                                    <td><i class="fas fa-map-marker-alt me-2"></i> <a href="#"
                                            style="color: #007bff; text-decoration: none;">Polytextile Production
                                            Centre, Ujjain</a></td>
                                    <td>1,000</td>
                                    <td>420</td>
                                    <td>580</td>
                                </tr>
                                <tr data-bs-toggle="modal" data-bs-target="#modalDewasCharm">
                                    <td><i class="fas fa-map-marker-alt me-2"></i> <a href="#"
                                            style="color: #007bff; text-decoration: none;">Charm Shivan Kendra,
                                            Dewas</a></td>
                                    <td>800</td>
                                    <td>80</td>
                                    <td>720</td>
                                </tr>
                                <tr data-bs-toggle="modal" data-bs-target="#modalGwaliorTelghani">
                                    <td><i class="fas fa-map-marker-alt me-2"></i> <a href="#"
                                            style="color: #007bff; text-decoration: none;">Telghani Centre, Gwalior</a>
                                    </td>
                                    <td>1,800</td>
                                    <td>280</td>
                                    <td>1520</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>



        <!-- Plant Production & Stock Details -->
        <div class="col-md-6">
            <div class="dashboard-card card  p-4">
                <div class="card-header d-flex justify-content-between align-items-center border-bottom pb-3">
                    <h5 class="card-title mb-0">Plant Production & Stock Details</h5>
                    <div class="d-flex gap-2">
                        <button class="btn btn-outline-secondary btn-sm" id="production-btn"><i
                                class="fas fa-industry"></i> Production</button>
                        <button class="btn btn-primary btn-sm" id="stock-btn"><i class="fas fa-boxes"></i>
                            Stock</button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover" id="plant-table">
                            <thead>
                                <tr>
                                    <th>Production Center Name</th>
                                    <th>Raw Material</th>
                                    <th>Ready Stock</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr data-bs-toggle="modal" data-bs-target="#modalGwaliorKambal">
                                    <td><i class="fas fa-map-marker-alt me-2"></i> <a href="#"
                                            style="color: #007bff; text-decoration: none;">Kambal Kendra, Gwalior</a>
                                    </td>
                                    <td>1,500</td>
                                    <td>540</td>
                                    <td><span class="badge bg-success"><i
                                                class="fas fa-check-circle me-1"></i>Adequate</span></td>
                                </tr>
                                <tr data-bs-toggle="modal" data-bs-target="#modalIndoreKhadi">
                                    <td><i class="fas fa-map-marker-alt me-2"></i> <a href="#"
                                            style="color: #007bff; text-decoration: none;">Khadi Production Centre,
                                            Indore</a></td>
                                    <td>1,200</td>
                                    <td>150</td>
                                    <td><span class="badge bg-warning"><i
                                                class="fas fa-exclamation-circle me-1"></i>Low</span></td>
                                </tr>
                                <tr data-bs-toggle="modal" data-bs-target="#modalUjjainPolytextile">
                                    <td><i class="fas fa-map-marker-alt me-2"></i> <a href="#"
                                            style="color: #007bff; text-decoration: none;">Polytextile Production
                                            Centre, Ujjain</a></td>
                                    <td>1,000</td>
                                    <td>420</td>
                                    <td><span class="badge bg-success"><i
                                                class="fas fa-check-circle me-1"></i>Adequate</span></td>
                                </tr>
                                <tr data-bs-toggle="modal" data-bs-target="#modalDewasCharm">
                                    <td><i class="fas fa-map-marker-alt me-2"></i> <a href="#"
                                            style="color: #007bff; text-decoration: none;">Charm Shivan Kendra,
                                            Dewas</a></td>
                                    <td>800</td>
                                    <td>80</td>
                                    <td><span class="badge bg-danger"><i
                                                class="fas fa-times-circle me-1"></i>Critical</span></td>
                                </tr>
                                <tr data-bs-toggle="modal" data-bs-target="#modalGwaliorTelghani">
                                    <td><i class="fas fa-map-marker-alt me-2"></i> <a href="#"
                                            style="color: #007bff; text-decoration: none;">Telghani Centre, Gwalior</a>
                                    </td>
                                    <td>1,800</td>
                                    <td>280</td>
                                    <td><span class="badge bg-warning"><i
                                                class="fas fa-exclamation-circle me-1"></i>Low</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal for Kambal Kendra, Gwalior -->
        <div class="modal fade" id="modalGwaliorKambal" tabindex="-1" aria-labelledby="modalGwaliorKambalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modalGwaliorKambalLabel">Kambal Kendra, Gwalior Details</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <table class="modal-table">
                            <thead>
                                <tr>
                                    <th>Product/ Item</th>
                                    <th>Unit</th>
                                    <th>Stock Quantity</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>BLANKET FINE 55*90</td>
                                    <td>Inch</td>
                                    <td>252</td>
                                </tr>
                                <tr>
                                    <td>BLANKET FINE 54*90 FANCY</td>
                                    <td>Inch</td>
                                    <td>20 </td>
                                </tr>
                                <tr>
                                    <td>BLANKET 54*90 PLAIN</td>
                                    <td>Inch</td>
                                    <td>154</td>
                                </tr>
                                <tr>
                                    <td>COATING FABRIC FINE 54</td>
                                    <td>Inch</td>
                                    <td>114 </td>
                                </tr>
                                <tr>
                                    <td>योग</td>
                                    <td></td>
                                    <td>540</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal for Khadi Production Centre, Indore -->
        <div class="modal fade" id="modalIndoreKhadi" tabindex="-1" aria-labelledby="modalIndoreKhadiLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modalIndoreKhadiLabel">Khadi Production Centre, Indore Details</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <table class="modal-table">
                            <thead>
                                <tr>
                                    <th>Product</th>
                                    <th>Unit</th>
                                    <th>Stock Quantity</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Khadi Cloth</td>
                                    <td>-</td>
                                    <td>150</td>
                                </tr>
                                <tr>
                                    <td>Raw Cotton</td>
                                    <td>-</td>
                                    <td>10 kg</td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal for Polytextile Production Centre, Ujjain -->
        <div class="modal fade" id="modalUjjainPolytextile" tabindex="-1" aria-labelledby="modalUjjainPolytextileLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modalUjjainPolytextileLabel">Polytextile Production Centre, Ujjain
                            Details</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <table class="modal-table">
                            <thead>
                                <tr>
                                    <th>Product</th>
                                    <th>Unit</th>
                                    <th>Stock Quantity</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Polytextile Fabric</td>
                                    <td>-</td>
                                    <td>400</td>
                                </tr>
                                <tr>
                                    <td>Raw Polyester</td>
                                    <td>-</td>
                                    <td>20 kg</td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal for Charm Shivan Kendra, Dewas -->
        <div class="modal fade" id="modalDewasCharm" tabindex="-1" aria-labelledby="modalDewasCharmLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modalDewasCharmLabel">Charm Shivan Kendra, Dewas Details</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <table class="modal-table">
                            <thead>
                                <tr>
                                    <th>Product</th>
                                    <th>Unit</th>
                                    <th>Stock Quantity</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Charm Shivan Fabric</td>
                                    <td>-</td>
                                    <td>80</td>
                                </tr>
                                <tr>
                                    <td>Raw Silk</td>
                                    <td>-</td>
                                    <td>5 kg</td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal for Telghani Centre, Gwalior -->
        <div class="modal fade" id="modalGwaliorTelghani" tabindex="-1" aria-labelledby="modalGwaliorTelghaniLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modalGwaliorTelghaniLabel">Telghani Centre, Gwalior Details</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <table class="modal-table">
                            <thead>
                                <tr>
                                    <th>Product</th>
                                    <th>Unit</th>
                                    <th>Stock Quantity</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Telghani Cloth</td>
                                    <td>-</td>
                                    <td>250</td>
                                </tr>
                                <tr>
                                    <td>Raw Fiber</td>
                                    <td>-</td>
                                    <td>30 kg</td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>


    </div>
    </div>

    <script>
        // Sample sales data from previous table
        const salesData = [
            { emporium: "ग्वालियर", target: 80, sales: 70, percentage: 87.5 },
            { emporium: "मंदसौर", target: 20, sales: 0, percentage: 0.0 }
        ];

        document.addEventListener('DOMContentLoaded', function () {
            try {
                const notificationItems = document.querySelectorAll('.notification-item');
                const modal = new bootstrap.Modal(document.getElementById('notificationModal'), { backdrop: true });
                const modalTitle = document.getElementById('modal-title');
                const modalDesc = document.getElementById('modal-desc');
                const modalDemand = document.getElementById('modal-demand');
                const modalTime = document.getElementById('modal-time');
                const modalSalesData = document.getElementById('modal-sales-data');
                const notificationList = document.getElementById('notification-list');
                let currentNotification = null;

                // Function to populate modal
                function populateModal(item) {
                    try {
                        currentNotification = item; // Store the clicked item
                        const title = item.querySelector('.notification-title')?.innerHTML || 'N/A';
                        const desc = item.querySelector('.notification-desc')?.textContent || 'No description';
                        const demand = item.dataset?.demandNumber || 'N/A';
                        const time = item.querySelector('.notification-time')?.textContent || 'Unknown time';
                        const emporium = item.dataset?.emporium || 'None';
                        const isWarning = item.classList.contains('warning');
                        const isInfo = item.classList.contains('info');

                        if (modalTitle) modalTitle.innerHTML = title;
                        if (modalDesc) modalDesc.textContent = desc;
                        if (modalDemand) {
                            modalDemand.textContent = demand;
                            modalDemand.className = 'badge';
                            modalDemand.classList.add(isWarning ? 'bg-warning' : isInfo ? 'bg-info' : 'bg-secondary');
                        }
                        if (modalTime) modalTime.textContent = time;

                        // Display sales data if emporium matches
                        if (modalSalesData) {
                            modalSalesData.innerHTML = '';
                            if (emporium !== 'None') {
                                const data = salesData.find(row => row.emporium.includes(emporium));
                                if (data) {
                                    const percentageClass = data.percentage >= 50 ? 'success' :
                                        data.percentage >= 30 ? 'warning' : 'danger';
                                    modalSalesData.innerHTML = `
                                        <h6><i class="fas fa-chart-line me-2 text-success"></i>Sales Data for ${emporium}</h6>
                                        <table class="sales-table">
                                            <thead>
                                                <tr>
                                                    <th>Target (Lakhs)</th>
                                                    <th>Sales (Lakhs)</th>
                                                    <th>Percentage Fulfillment</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>${data.target}</td>
                                                    <td>${data.sales}</td>
                                                    <td class="${percentageClass}">${data.percentage}%</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    `;
                                }
                            }
                        }
                    } catch (error) {
                        console.error('Error populating modal:', error);
                    }
                }

                // Click event
                notificationItems.forEach(item => {
                    item.addEventListener('click', function () {
                        try {
                            populateModal(this);
                            modal.show();
                        } catch (error) {
                            console.error('Error opening modal:', error);
                        }
                    });
                });

                // Mark All Read button
                const markReadBtn = document.getElementById('mark-read-btn');
                if (markReadBtn) {
                    markReadBtn.addEventListener('click', function () {
                        try {
                            notificationItems.forEach(item => {
                                item.classList.remove('warning', 'info');
                                item.classList.add('read');
                            });
                        } catch (error) {
                            console.error('Error marking all read:', error);
                        }
                    });
                }

                // Dismiss Notification button
                const dismissBtn = document.getElementById('dismiss-notification');
                if (dismissBtn) {
                    dismissBtn.addEventListener('click', function () {
                        try {
                            if (currentNotification && notificationList && notificationList.contains(currentNotification)) {
                                notificationList.removeChild(currentNotification);
                                modal.hide();
                                currentNotification = null;
                            } else {
                                console.warn('No valid notification to dismiss or notification list not found');
                            }
                        } catch (error) {
                            console.error('Error dismissing notification:', error);
                        }
                    });
                }
            } catch (error) {
                console.error('Script initialization error:', error);
            }
        });
    </script>
    <!-- Color Badge for table -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const table = document.querySelector('#salesModal .modal-table tbody');
            const rows = table.querySelectorAll('tr:not(:last-child)'); // Exclude the total row

            rows.forEach(row => {
                const percentageCell = row.querySelector('td:last-child');
                const percentageText = percentageCell.textContent.trim();
                const percentage = parseFloat(percentageText.replace('%', ''));

                if (isNaN(percentage)) {
                    // Handle rows with invalid/missing percentage (not set)
                    row.classList.add('default-row'); // Optional: can apply a default style if needed
                } else if (percentage >= 50) {
                    row.classList.add('success-row');
                } else if (percentage >= 30 && percentage <= 49) {
                    row.classList.add('warning-row');
                } else if (percentage >= 0 && percentage <= 29) {
                    row.classList.add('danger-row');
                }
            });
        });
    </script>

    <script>
        function toggleUserTitle() {
            const userTitle = document.getElementById('user-title');
            if (userTitle.textContent === 'Managing Director') {
                userTitle.textContent = 'Principal Secretary';
                window.location.href = 'Index2.html'; // Redirect to the Managing Director page
            } else {
                userTitle.textContent = 'Managing Director';
            }
        }
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize anime.js timeline
            const timeline = anime.timeline({
                easing: 'easeOutExpo',
                duration: 0
            });

            // Animate KPI cards
            const kpiCards = document.querySelectorAll('.kpi-card');
            kpiCards.forEach((card, index) => {
                timeline.add({
                    targets: card,
                    translateY: 0,
                    opacity: 1,
                    delay: index * 100
                });
            });

            // Animate dashboard cards
            const dashboardCards = document.querySelectorAll('.dashboard-card');
            dashboardCards.forEach((card, index) => {
                timeline.add({
                    targets: card,
                    scale: 1,
                    opacity: 1,
                    delay: index * 100
                });
            });

            // Animate notification items
            const notificationItems = document.querySelectorAll('.notification-item');
            notificationItems.forEach((item, index) => {
                timeline.add({
                    targets: item,
                    translateX: 0,
                    opacity: 1,
                    delay: index * 100
                });
            });

            // Animate modals on show
            const modals = ['targetsModal', 'productionModal', 'salesModal', 'ordersModal', 'stockModal', 'lowStockModal', 'modalGwaliorKambal', 'modalIndoreKhadi', 'modalUjjainPolytextile', 'modalDewasCharm', 'modalGwaliorTelghani'];
            modals.forEach(modalId => {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.addEventListener('show.bs.modal', () => {
                        anime({
                            targets: '.modal-content',
                            scale: [0.9, 1],
                            opacity: [0, 1],
                            duration: 500,
                            easing: 'easeOutExpo'
                        });
                    });
                }
            });

            // Counter animations for KPI values
            animateValue('production-value', 0, 710, 1500);
            animateValue('sales-value', 0, 292, 1500);
            animateValue('orders-value', 0, 5, 1500);
            animateValue('stock-value', 0, 1064, 1500);
            animateValue('total-orders', 0, 1000, 1500);

            function animateValue(id, start, end, duration) {
                const obj = document.getElementById(id);
                if (!obj) return;
                let startTimestamp = null;
                const step = (timestamp) => {
                    if (!startTimestamp) startTimestamp = timestamp;
                    const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                    const value = Math.floor(progress * (end - start) + start);
                    obj.innerHTML = value.toLocaleString('en-IN');
                    if (progress < 1) {
                        window.requestAnimationFrame(step);
                    }
                };
                window.requestAnimationFrame(step);
            }

            // Data for different financial years
            const dataByFinancialYear = {
                '2024-25': {
                    finishedProducts: {
                        monthly: {
                            labels: ['Gents Kurta', 'Saree Kosa Block Print', 'Gents Shirt White FS', 'Woolen Jacket', 'Kurta Regular'],
                            data: [1100, 900, 700, 600, 550]
                        },
                        quarterly: {
                            labels: ['Gents Kurta', 'Saree Kosa Block Print', 'Gents Shirt White FS', 'Woolen Jacket', 'Kurta Regular'],
                            data: [3300, 2700, 2100, 1800, 1650]
                        },
                        yearly: {
                            labels: ['Gents Kurta', 'Saree Kosa Block Print', 'Gents Shirt White FS', 'Woolen Jacket', 'Kurta Regular'],
                            data: [13200, 10800, 8400, 7200, 6600]
                        }
                    },
                    belowFinishedProducts: {
                        monthly: {
                            labels: ['Tikamgarh Kambal', 'Chhindwara Kambal', 'Khargone Khadi', 'Maheshwar Silk', 'Indore Khadi'],
                            data: [18, 24, 24, 25, 26]
                        },
                        quarterly: {
                            labels: ['Tikamgarh Kambal', 'Chhindwara Kambal', 'Khargone Khadi', 'Maheshwar Silk', 'Indore Khadi'],
                            data: [54, 72, 72, 75, 78]
                        },
                        yearly: {
                            labels: ['Tikamgarh Kambal', 'Chhindwara Kambal', 'Khargone Khadi', 'Maheshwar Silk', 'Indore Khadi'],
                            data: [216, 288, 288, 300, 312]
                        }
                    },
                    emporiumSales: {
                        quantity: {
                            labels: ['Jawahar Chowk', 'MP Nagar', 'Morena', 'Gwalior', 'Indore'],
                            data: [1150, 900, 800, 600, 550]
                        },
                        revenue: {
                            labels: ['Jawahar Chowk', 'MP Nagar', 'Morena', 'Gwalior', 'Indore'],
                            data: [1150000, 900000, 800000, 600000, 550000]
                        }
                    },
                    belowEmporiumSales: {
                        quantity: {
                            labels: ['Morena', 'Bhopal Hot', 'Pachmarhi', 'Ravishankar Nagar', 'Narmadapuram'],
                            data: [10, 0, 0, 0, 0]
                        },
                        revenue: {
                            labels: ['Morena', 'Bhopal Hot', 'Pachmarhi', 'Ravishankar Nagar', 'Narmadapuram'],
                            data: [9600, 0, 0, 0, 0]
                        }
                    },
                    orderVsSupply: {
                        byDepartment: { labels: ['Supplied (Other Dept)', 'Pending (Other Dept)'], data: [750, 180] },
                        bySelf: { labels: ['Supplied (Self)', 'Pending (Self)'], data: [400, 280] }
                    },
                    kpi: {
                        productionValue: 568,
                        salesValue: 233.6,
                        ordersValue: 720,
                        stockValue: 851.2
                    }
                },
                '2025-26': {
                    finishedProducts: {
                        monthly: {
                            labels: ['Gents Kurta', 'Saree Kosa Block Print', 'Gents Shirt White FS', 'Woolen Jacket', 'Kurta Regular'],
                            data: [1064, 980, 750, 620, 580]
                        },
                        quarterly: {
                            labels: ['Gents Kurta', 'Saree Kosa Block Print', 'Gents Shirt White FS', 'Woolen Jacket', 'Kurta Regular'],
                            data: [3750, 2940, 2250, 1860, 1740]
                        },
                        yearly: {
                            labels: ['Gents Kurta', 'Saree Kosa Block Print', 'Gents Shirt White FS', 'Woolen Jacket', 'Kurta Regular'],
                            data: [15000, 11760, 9000, 7440, 6960]
                        }
                    },

                    vindhyavalley: {
                        monthly: {
                            labels: ['Gents Kurta', 'Saree Kosa Block Print', 'Gents Shirt White FS', 'Woolen Jacket', 'Kurta Regular'],
                            data: [1064, 980, 750, 620, 580]
                        },
                        quarterly: {
                            labels: ['Gents Kurta', 'Saree Kosa Block Print', 'Gents Shirt White FS', 'Woolen Jacket', 'Kurta Regular'],
                            data: [3750, 2940, 2250, 1860, 1740]
                        },
                        yearly: {
                            labels: ['Gents Kurta', 'Saree Kosa Block Print', 'Gents Shirt White FS', 'Woolen Jacket', 'Kurta Regular'],
                            data: [500, 2176, 2100, 744, 2960]
                        }
                    },

                    categorywisesale: {
                        monthly: {
                            labels: ['Cotton', 'Woolen', 'Silk', 'Leather', 'Other'],
                            data: [1064, 980, 750, 620, 580]
                        },
                        quarterly: {
                            labels: ['Cotton', 'Woolen', 'Silk', 'Leather', 'Other'],
                            data: [3750, 2940, 2250, 1860, 1740]
                        },
                        yearly: {
                            labels: ['Cotton', 'Woolen', 'Silk', 'Leather', 'Other'],
                            data: [19000, 10760, 30000, 3000, 15000]
                        }
                    },


                    belowFinishedProducts: {
                        monthly: {
                            labels: ['Tikamgarh Kambal', 'Chhindwara Kambal', 'Khargone Khadi', 'Maheshwar Silk', 'Indore Khadi'],
                            data: [22, 30, 30, 31, 33]
                        },
                        quarterly: {
                            labels: ['Tikamgarh Kambal', 'Chhindwara Kambal', 'Khargone Khadi', 'Maheshwar Silk', 'Indore Khadi'],
                            data: [66, 90, 90, 93, 99]
                        },
                        yearly: {
                            labels: ['Tikamgarh Kambal', 'Chhindwara Kambal', 'Khargone Khadi', 'Maheshwar Silk', 'Indore Khadi'],
                            data: [264, 360, 360, 372, 396]
                        }
                    },
                    emporiumSales: {
                        quantity: {
                            labels: ['Jawahar Chowk', 'MP Nagar', 'Morena', 'Gwalior', 'Indore'],
                            data: [1250, 980, 875, 620, 580]
                        },
                        revenue: {
                            labels: ['Jawahar Chowk', 'MP Nagar', 'Morena', 'Gwalior', 'Indore'],
                            data: [1250000, 980000, 875000, 620000, 580000]
                        }
                    },
                    belowEmporiumSales: {
                        quantity: {
                            labels: ['Morena', 'Bhopal Hot', 'Pachmarhi', 'Ravishankar Nagar', 'Narmadapuram'],
                            data: [12, 15, 24, 35, 8]
                        },
                        revenue: {
                            labels: ['Morena', 'Bhopal Hot', 'Pachmarhi', 'Ravishankar Nagar', 'Narmadapuram'],
                            data: [12000, 15000, 24000, 35000, 8000]
                        }
                    },
                    orderVsSupply: {
                        byDepartment: { labels: ['Supplied (Other Dept)', 'Pending (Other Dept)'], data: [800, 200] },
                        bySelf: { labels: ['Supplied (Self)', 'Pending (Self)'], data: [450, 300] }
                    },
                    kpi: {
                        productionValue: 710,
                        salesValue: 292,
                        ordersValue: 5,
                        stockValue: 1064
                    }
                }
            };

            // Chart 1: Top 5 / Below 5 Finished Products Sales
            const finishedProductsCtx = document.getElementById('finishedProductsChart')?.getContext('2d');
            let finishedProductsChart;
            if (finishedProductsCtx) {
                finishedProductsChart = new Chart(finishedProductsCtx, {
                    type: 'bar',
                    data: {
                        labels: dataByFinancialYear['2025-26'].finishedProducts.yearly.labels,
                        datasets: [{
                            label: 'Quantity Produced (Nos)',
                            data: dataByFinancialYear['2025-26'].finishedProducts.yearly.data,
                            backgroundColor: ['rgba(52, 152, 219, 0.7)', 'rgba(155, 89, 182, 0.7)', 'rgba(52, 73, 94, 0.7)', 'rgba(39, 174, 96, 0.7)', 'rgba(241, 196, 15, 0.7)'],
                            borderColor: ['rgba(52, 152, 219, 1)', 'rgba(155, 89, 182, 1)', 'rgba(52, 73, 94, 1)', 'rgba(39, 174, 96, 1)', 'rgba(241, 196, 15, 1)'],
                            borderWidth: 1,
                            borderRadius: 6,
                            borderSkipped: false
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                callbacks: {
                                    afterLabel: function (context) {
                                        const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                        const percentage = Math.round((context.raw / total) * 100);
                                        return `Percentage: ${percentage}% of total production`;
                                    }
                                }
                            },
                            datalabels: { display: false }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: { display: true, text: 'Quantity (Nos)', font: { weight: 'bold' } },
                                grid: { color: 'rgba(0, 0, 0, 0.05)' }
                            },
                            x: { grid: { display: false } }
                        },
                        animation: { duration: 2000, easing: 'easeOutQuart' }
                    }
                });
            }


            // Chart 1: Top 5 / Below 5 Finished Products Sales
            const vindhyavalleyCtx = document.getElementById('vindhyavalleyChart')?.getContext('2d');
            let vindhyavalleyChart;
            if (vindhyavalleyCtx) {
                vindhyavalleyChart = new Chart(vindhyavalleyCtx, {
                    type: 'bar',
                    data: {
                        labels: dataByFinancialYear['2025-26'].vindhyavalley.yearly.labels,
                        datasets: [{
                            label: 'Quantity Produced (Nos)',
                            data: dataByFinancialYear['2025-26'].vindhyavalley.yearly.data,
                            backgroundColor: ['rgba(52, 152, 219, 0.7)', 'rgba(155, 89, 182, 0.7)', 'rgba(52, 73, 94, 0.7)', 'rgba(39, 174, 96, 0.7)', 'rgba(241, 196, 15, 0.7)'],
                            borderColor: ['rgba(52, 152, 219, 1)', 'rgba(155, 89, 182, 1)', 'rgba(52, 73, 94, 1)', 'rgba(39, 174, 96, 1)', 'rgba(241, 196, 15, 1)'],
                            borderWidth: 1,
                            borderRadius: 6,
                            borderSkipped: false
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                callbacks: {
                                    afterLabel: function (context) {
                                        const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                        const percentage = Math.round((context.raw / total) * 100);
                                        return `Percentage: ${percentage}% of total production`;
                                    }
                                }
                            },
                            datalabels: { display: false }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: { display: true, text: 'Quantity (Nos)', font: { weight: 'bold' } },
                                grid: { color: 'rgba(0, 0, 0, 0.05)' }
                            },
                            x: { grid: { display: false } }
                        },
                        animation: { duration: 2000, easing: 'easeOutQuart' }
                    }
                });
            }

            // Main category Wise Sales
            const categorywisesaleCtx = document.getElementById('categorywisesaleChart')?.getContext('2d');
            let categorywisesaleChart;
            if (categorywisesaleCtx) {
                vindhyavalleyChart = new Chart(categorywisesaleCtx, {
                    type: 'bar',
                    data: {
                        labels: dataByFinancialYear['2025-26'].categorywisesale.yearly.labels,
                        datasets: [{
                            label: 'Quantity Produced (Nos)',
                            data: dataByFinancialYear['2025-26'].categorywisesale.yearly.data,
                            backgroundColor: ['rgba(52, 152, 219, 0.7)', 'rgba(155, 89, 182, 0.7)', 'rgba(52, 73, 94, 0.7)', 'rgba(39, 174, 96, 0.7)', 'rgba(241, 196, 15, 0.7)'],
                            borderColor: ['rgba(52, 152, 219, 1)', 'rgba(155, 89, 182, 1)', 'rgba(52, 73, 94, 1)', 'rgba(39, 174, 96, 1)', 'rgba(241, 196, 15, 1)'],
                            borderWidth: 1,
                            borderRadius: 6,
                            borderSkipped: false
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                callbacks: {
                                    afterLabel: function (context) {
                                        const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                        const percentage = Math.round((context.raw / total) * 100);
                                        return `Percentage: ${percentage}% of total production`;
                                    }
                                }
                            },
                            datalabels: { display: false }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: { display: true, text: 'Quantity (Nos)', font: { weight: 'bold' } },
                                grid: { color: 'rgba(0, 0, 0, 0.05)' }
                            },
                            x: { grid: { display: false } }
                        },
                        animation: { duration: 2000, easing: 'easeOutQuart' }
                    }
                });
            }


            // Chart 2: Top 5 / Below 5 Emporium Wise Sales
            const emporiumSalesCtx = document.getElementById('emporiumSalesChart')?.getContext('2d');
            let emporiumSalesChart;
            if (emporiumSalesCtx) {
                emporiumSalesChart = new Chart(emporiumSalesCtx, {
                    type: 'doughnut',
                    data: {
                        labels: dataByFinancialYear['2025-26'].emporiumSales.revenue.labels,
                        datasets: [{
                            label: 'Sales (₹)',
                            data: dataByFinancialYear['2025-26'].emporiumSales.revenue.data,
                            backgroundColor: ['rgba(231, 76, 60, 0.7)', 'rgba(243, 156, 18, 0.7)', 'rgba(46, 204, 113, 0.7)', 'rgba(52, 152, 219, 0.7)', 'rgba(155, 89, 182, 0.7)'],
                            borderColor: ['rgba(231, 76, 60, 1)', 'rgba(243, 156, 18, 1)', 'rgba(46, 204, 113, 1)', 'rgba(52, 152, 219, 1)', 'rgba(155, 89, 182, 1)'],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'right' },
                            tooltip: {
                                callbacks: {
                                    label: function (context) {
                                        const label = context.label || '';
                                        const value = context.raw || 0;
                                        const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                        const percentage = total > 0 ? Math.round((value / total) * 100) : 0;
                                        return `${label}: ₹${value.toLocaleString('en-IN')} (${percentage}%)`;
                                    }
                                }
                            },
                            datalabels: {
                                formatter: (value, ctx) => {
                                    const total = ctx.chart.data.datasets[0].data.reduce((a, b) => a + b, 0);
                                    const percentage = total > 0 ? Math.round((value / total) * 100) : 0;
                                    return `${percentage}%`;
                                },
                                color: '#fff',
                                font: { weight: 'bold' }
                            }
                        },
                        cutout: '50%',
                        animation: { animateScale: true, animateRotate: true }
                    },
                    plugins: [ChartDataLabels]
                });
            }

            // Chart 3: Order vs Supply
            const ordervssupplyCtx = document.getElementById('ordervssupplyChart')?.getContext('2d');
            let ordervssupplyChart;
            if (ordervssupplyCtx) {
                ordervssupplyChart = new Chart(ordervssupplyCtx, {
                    type: 'pie',
                    data: {
                        labels: dataByFinancialYear['2025-26'].orderVsSupply.byDepartment.labels,
                        datasets: [{
                            label: 'Orders',
                            data: dataByFinancialYear['2025-26'].orderVsSupply.bySelf.data,
                            backgroundColor: ['rgba(46, 204, 113, 0.7)', 'rgba(231, 76, 60, 0.7)'],
                            borderColor: ['rgba(46, 204, 113, 1)', 'rgba(231, 76, 60, 1)'],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'right' },
                            tooltip: {
                                callbacks: {
                                    label: function (context) {
                                        const label = context.label || '';
                                        const value = context.raw || 0;
                                        const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                        const percentage = Math.round((value / total) * 100);
                                        return `${label}: ${value.toLocaleString('en-IN')} orders (${percentage}%)`;
                                    }
                                }
                            },
                            datalabels: {
                                formatter: (value, ctx) => {
                                    const total = ctx.chart.data.datasets[0].data.reduce((a, b) => a + b, 0);
                                    const percentage = Math.round((value / total) * 100);
                                    return `${percentage}%`;
                                },
                                color: '#fff',
                                font: { weight: 'bold' }
                            }
                        },
                        cutout: '50%',
                        animation: { animateScale: true, animateRotate: true }
                    },
                    plugins: [ChartDataLabels]
                });
            }

            // Financial Year Filter
            const financialYearSelect = document.getElementById('financial-year');
            financialYearSelect.addEventListener('change', function () {
                const selectedYear = this.value;
                const period = document.querySelector('.dashboard-card:nth-child(1) .btn-primary')?.id === 'monthly-btn' ? 'monthly' : document.querySelector('.dashboard-card:nth-child(1) .btn-primary')?.id === 'quarterly-btn' ? 'quarterly' : 'yearly';
                const salesType = document.querySelector('.dashboard-card:nth-child(2) .btn-primary')?.id === 'quantity-btn' ? 'quantity' : 'revenue';
                const orderType = document.querySelector('.dashboard-card:nth-child(3) .btn-primary')?.id === 'by-department-btn' ? 'byDepartment' : 'bySelf';
                const finishedToggle = document.getElementById('finished-toggle-btn')?.dataset.toggle || 'top';
                const emporiumToggle = document.getElementById('emporium-toggle-btn')?.dataset.toggle || 'top';

                // Update KPI values
                animateValue('production-value', parseInt(document.getElementById('production-value')?.textContent.replace(/,/g, '') || '0'), dataByFinancialYear[selectedYear].kpi.productionValue, 1500);
                animateValue('sales-value', parseInt(document.getElementById('sales-value')?.textContent.replace(/,/g, '') || '0'), dataByFinancialYear[selectedYear].kpi.salesValue, 1500);
                animateValue('orders-value', parseInt(document.getElementById('orders-value')?.textContent.replace(/,/g, '') || '0'), dataByFinancialYear[selectedYear].kpi.ordersValue, 1500);
                animateValue('stock-value', parseInt(document.getElementById('stock-value')?.textContent.replace(/,/g, '') || '0'), dataByFinancialYear[selectedYear].kpi.stockValue, 1500);

                // Update Finished Products Chart
                if (vindhyavalleyChart) {
                    const dataKey = finishedToggle === 'top' ? 'finishedProducts' : 'belowFinishedProducts';
                    vindhyavalleyChart.data.labels = dataByFinancialYear[selectedYear][dataKey][period].labels;
                    vindhyavalleyChart.data.datasets[0].data = dataByFinancialYear[selectedYear][dataKey][period].data;
                    vindhyavalleyChart.data.datasets[0].label = finishedToggle === 'top' ? 'Quantity Produced (kg)' : 'Production (Lakhs)';
                    vindhyavalleyChart.options.scales.y.title.text = finishedToggle === 'top' ? 'Quantity (Nos)' : 'Quantity (Nos)';
                    vindhyavalleyChart.update();
                    document.getElementById('finishedProductsTitle').textContent = finishedToggle === 'top' ? 'Top 5 Finished Products Sales' : 'Below 5 Finished Products Sales';
                }

                // Update Finished Products Chart
                if (finishedProductsChart) {
                    const dataKey = finishedToggle === 'top' ? 'finishedProducts' : 'belowFinishedProducts';
                    finishedProductsChart.data.labels = dataByFinancialYear[selectedYear][dataKey][period].labels;
                    finishedProductsChart.data.datasets[0].data = dataByFinancialYear[selectedYear][dataKey][period].data;
                    finishedProductsChart.data.datasets[0].label = finishedToggle === 'top' ? 'Quantity Produced (kg)' : 'Production (Lakhs)';
                    finishedProductsChart.options.scales.y.title.text = finishedToggle === 'top' ? 'Quantity (Nos)' : 'Quantity (Nos)';
                    finishedProductsChart.update();
                    document.getElementById('finishedProductsTitle').textContent = finishedToggle === 'top' ? 'Top 5 Finished Products Sales' : 'Below 5 Finished Products Sales';
                }

                // Update Emporium Sales Chart
                if (emporiumSalesChart) {
                    const dataKey = emporiumToggle === 'top' ? 'emporiumSales' : 'belowEmporiumSales';
                    emporiumSalesChart.data.labels = dataByFinancialYear[selectedYear][dataKey][salesType].labels;
                    emporiumSalesChart.data.datasets[0].data = dataByFinancialYear[selectedYear][dataKey][salesType].data;
                    emporiumSalesChart.data.datasets[0].label = salesType === 'quantity' ? 'Units Sold' : 'Sales (₹)';
                    emporiumSalesChart.options.plugins.tooltip.callbacks.label = function (context) {
                        const label = context.label || '';
                        const value = context.raw || 0;
                        const total = context.dataset.data.reduce((a, b) => a + b, 0);
                        const percentage = total > 0 ? Math.round((value / total) * 100) : 0;
                        return salesType === 'quantity'
                            ? `${label}: ${value} units (${percentage}%)`
                            : `${label}: ₹${value.toLocaleString('en-IN')} (${percentage}%)`;
                    };
                    emporiumSalesChart.update();
                    document.getElementById('emporiumSalesTitle').textContent = emporiumToggle === 'top' ? 'Top 5 Emporium Wise Sales' : 'Below 5 Emporium Wise Sales';
                }

                // Update Order vs Supply Chart
                if (ordervssupplyChart) {
                    ordervssupplyChart.data.labels = dataByFinancialYear[selectedYear].orderVsSupply[orderType].labels;
                    ordervssupplyChart.data.datasets[0].data = dataByFinancialYear[selectedYear].orderVsSupply[orderType].data;
                    ordervssupplyChart.update();
                    const totalOrders = dataByFinancialYear[selectedYear].orderVsSupply[orderType].data.reduce((a, b) => a + b, 0);
                    animateValue('total-orders', parseInt(document.getElementById('total-orders').textContent.replace(/,/g, '') || '0'), totalOrders, 1000);
                }

                anime({
                    targets: ['#finishedProductsChart', '#emporiumSalesChart', '#ordervssupplyChart', '.kpi-card'],
                    scale: [0.95, 1],
                    opacity: [0.8, 1],
                    duration: 500
                });
            });

            // Toggle Button for Finished Products
            const finishedToggleBtn = document.getElementById('finished-toggle-btn');
            if (finishedToggleBtn) {
                finishedToggleBtn.addEventListener('click', function () {
                    const toggleState = this.dataset.toggle === 'top' ? 'below' : 'top';
                    this.dataset.toggle = toggleState;
                    this.textContent = toggleState === 'top' ? 'Toggle to Below 5' : 'Toggle to Top 5';
                    const selectedYear = financialYearSelect.value;
                    const period = document.querySelector('.dashboard-card:nth-child(1) .btn-primary')?.id === 'monthly-btn' ? 'monthly' : document.querySelector('.dashboard-card:nth-child(1) .btn-primary')?.id === 'quarterly-btn' ? 'quarterly' : 'yearly';
                    const dataKey = toggleState === 'top' ? 'finishedProducts' : 'belowFinishedProducts';

                    if (finishedProductsChart) {
                        finishedProductsChart.data.labels = dataByFinancialYear[selectedYear][dataKey][period].labels;
                        finishedProductsChart.data.datasets[0].data = dataByFinancialYear[selectedYear][dataKey][period].data;
                        finishedProductsChart.data.datasets[0].label = toggleState === 'top' ? 'Quantity Produced (kg)' : 'Production (Lakhs)';
                        finishedProductsChart.options.scales.y.title.text = toggleState === 'top' ? 'Quantity (Nos)' : 'Quantity (Nos)';
                        finishedProductsChart.update();
                        document.getElementById('finishedProductsTitle').textContent = toggleState === 'top' ? 'Top 5 Finished Products Sales' : 'Below 5 Finished Products Sales';
                    }

                    anime({
                        targets: '#finishedProductsChart',
                        scale: [0.95, 1],
                        opacity: [0.8, 1],
                        duration: 500
                    });
                });
            }

            // Toggle Button for Emporium Sales
            const emporiumToggleBtn = document.getElementById('emporium-toggle-btn');
            if (emporiumToggleBtn) {
                emporiumToggleBtn.addEventListener('click', function () {
                    const toggleState = this.dataset.toggle === 'top' ? 'below' : 'top';
                    this.dataset.toggle = toggleState;
                    this.textContent = toggleState === 'top' ? 'Toggle to Below 5' : 'Toggle to Top 5';
                    const selectedYear = financialYearSelect.value;
                    const salesType = document.querySelector('.dashboard-card:nth-child(2) .btn-primary')?.id === 'quantity-btn' ? 'quantity' : 'revenue';
                    const dataKey = toggleState === 'top' ? 'emporiumSales' : 'belowEmporiumSales';

                    if (emporiumSalesChart) {
                        emporiumSalesChart.data.labels = dataByFinancialYear[selectedYear][dataKey][salesType].labels;
                        emporiumSalesChart.data.datasets[0].data = dataByFinancialYear[selectedYear][dataKey][salesType].data;
                        emporiumSalesChart.data.datasets[0].label = salesType === 'quantity' ? 'Units Sold' : 'Sales (₹)';
                        emporiumSalesChart.options.plugins.tooltip.callbacks.label = function (context) {
                            const label = context.label || '';
                            const value = context.raw || 0;
                            const total = context.dataset.data.reduce((a, b) => a + b, 0);
                            const percentage = total > 0 ? Math.round((value / total) * 100) : 0;
                            return salesType === 'quantity'
                                ? `${label}: ${value} units (${percentage}%)`
                                : `${label}: ₹${value.toLocaleString('en-IN')} (${percentage}%)`;
                        };
                        emporiumSalesChart.update();
                        document.getElementById('emporiumSalesTitle').textContent = toggleState === 'top' ? 'Top 5 Emporium Wise Sales' : 'Below 5 Emporium Wise Sales';
                    }

                    anime({
                        targets: '#emporiumSalesChart',
                        scale: [0.95, 1],
                        opacity: [0.8, 1],
                        duration: 500
                    });
                });
            }

            // Filter buttons for Finished Products Sales
            const periodButtons = document.querySelectorAll('.dashboard-card:nth-child(1) .btn:not(#finished-toggle-btn)');
            periodButtons.forEach(button => {
                button.addEventListener('click', function () {
                    periodButtons.forEach(btn => {
                        btn.classList.remove('btn-primary');
                        btn.classList.add('btn-outline-secondary');
                    });
                    this.classList.add('btn-primary');
                    this.classList.remove('btn-outline-secondary');

                    const period = this.id === 'monthly-btn' ? 'monthly' : this.id === 'quarterly-btn' ? 'quarterly' : 'yearly';
                    const selectedYear = financialYearSelect.value;
                    const toggleState = document.getElementById('finished-toggle-btn')?.dataset.toggle || 'top';
                    const dataKey = toggleState === 'top' ? 'finishedProducts' : 'belowFinishedProducts';

                    if (finishedProductsChart) {
                        finishedProductsChart.data.labels = dataByFinancialYear[selectedYear][dataKey][period].labels;
                        finishedProductsChart.data.datasets[0].data = dataByFinancialYear[selectedYear][dataKey][period].data;
                        finishedProductsChart.data.datasets[0].label = toggleState === 'top' ? 'Quantity Produced (kg)' : 'Production (Lakhs)';
                        finishedProductsChart.options.scales.y.title.text = toggleState === 'top' ? 'Quantity (Nos)' : 'Production (Lakhs)';
                        finishedProductsChart.update();
                    }

                    anime({
                        targets: '#finishedProductsChart',
                        scale: [0.95, 1],
                        opacity: [0.8, 1],
                        duration: 500
                    });
                });
            });

            // Filter buttons for Emporium Sales
            const salesButtons = document.querySelectorAll('.dashboard-card:nth-child(2) .btn:not(#emporium-toggle-btn)');
            salesButtons.forEach(button => {
                button.addEventListener('click', function () {
                    salesButtons.forEach(btn => {
                        btn.classList.remove('btn-primary');
                        btn.classList.add('btn-outline-secondary');
                    });
                    this.classList.add('btn-primary');
                    this.classList.remove('btn-outline-secondary');

                    const type = this.id === 'quantity-btn' ? 'quantity' : 'revenue';
                    const selectedYear = financialYearSelect.value;
                    const toggleState = document.getElementById('emporium-toggle-btn')?.dataset.toggle || 'top';
                    const dataKey = toggleState === 'top' ? 'emporiumSales' : 'belowEmporiumSales';

                    if (emporiumSalesChart) {
                        emporiumSalesChart.data.labels = dataByFinancialYear[selectedYear][dataKey][type].labels;
                        emporiumSalesChart.data.datasets[0].data = dataByFinancialYear[selectedYear][dataKey][type].data;
                        emporiumSalesChart.data.datasets[0].label = type === 'quantity' ? 'Units Sold' : 'Sales (₹)';
                        emporiumSalesChart.options.plugins.tooltip.callbacks.label = function (context) {
                            const label = context.label || '';
                            const value = context.raw || 0;
                            const total = context.dataset.data.reduce((a, b) => a + b, 0);
                            const percentage = total > 0 ? Math.round((value / total) * 100) : 0;
                            return type === 'quantity'
                                ? `${label}: ${value} units (${percentage}%)`
                                : `${label}: ₹${value.toLocaleString('en-IN')} (${percentage}%)`;
                        };
                        emporiumSalesChart.update();
                    }

                    anime({
                        targets: '#emporiumSalesChart',
                        scale: [0.95, 1],
                        opacity: [0.8, 1],
                        duration: 500
                    });
                });
            });

            // Filter buttons for Order vs Supply
            const orderButtons = document.querySelectorAll('.dashboard-card:nth-child(3) .btn');
            orderButtons.forEach(button => {
                button.addEventListener('click', function () {
                    orderButtons.forEach(btn => {
                        btn.classList.remove('btn-primary');
                        btn.classList.add('btn-outline-secondary');
                    });
                    this.classList.add('btn-primary');
                    this.classList.remove('btn-outline-secondary');

                    const type = this.id === 'by-department-btn' ? 'byDepartment' : 'bySelf';
                    const selectedYear = financialYearSelect.value;
                    if (ordervssupplyChart) {
                        ordervssupplyChart.data.labels = dataByFinancialYear[selectedYear].orderVsSupply[type].labels;
                        ordervssupplyChart.data.datasets[0].data = dataByFinancialYear[selectedYear].orderVsSupply[type].data;
                        ordervssupplyChart.data.datasets[0].label = 'Orders';
                        ordervssupplyChart.options.plugins.tooltip.callbacks.label = function (context) {
                            const label = context.label || '';
                            const value = context.raw || 0;
                            const total = context.dataset.data.reduce((a, b) => a + b, 0);
                            const percentage = Math.round((value / total) * 100);
                            return `${label}: ${value.toLocaleString('en-IN')} orders (${percentage}%)`;
                        };
                        ordervssupplyChart.update();
                    }

                    const totalOrders = dataByFinancialYear[selectedYear].orderVsSupply[type].data.reduce((a, b) => a + b, 0);
                    animateValue('total-orders', parseInt(document.getElementById('total-orders').textContent.replace(/,/g, '') || '0'), totalOrders, 1000);

                    anime({
                        targets: '#ordervssupplyChart',
                        scale: [0.95, 1],
                        opacity: [0.8, 1],
                        duration: 500
                    });
                });
            });

            // Filter buttons for Plant Production & Stock
            const plantButtons = document.querySelectorAll('.dashboard-card:nth-child(4) .btn');
            const plantTableBody = document.querySelector('#plant-table tbody');

            plantButtons.forEach(button => {
                button.addEventListener('click', function () {
                    plantButtons.forEach(btn => {
                        btn.classList.remove('btn-primary');
                        btn.classList.add('btn-outline-secondary');
                    });
                    this.classList.add('btn-primary');
                    this.classList.remove('btn-outline-secondary');

                    const isProduction = this.id === 'production-btn';
                    const tableRows = plantTableBody?.querySelectorAll('tr') || [];

                    tableRows.forEach(row => {
                        const cells = row.querySelectorAll('td');
                        if (cells.length < 5) return;
                        const production = parseInt(cells[1].textContent) || 0;
                        const capacity = parseInt(cells[2].textContent) || 1;
                        const stock = parseInt(cells[3].textContent) || 0;

                        if (isProduction) {
                            cells[3].style.display = 'none';
                            cells[1].style.display = '';
                            cells[4].innerHTML = getStatusBadge(production, capacity, true);
                        } else {
                            cells[1].style.display = 'none';
                            cells[3].style.display = '';
                            cells[4].innerHTML = getStatusBadge(stock, 400, false);
                        }
                    });

                    anime({
                        targets: '#plant-table tr',
                        translateX: [-10, 0],
                        opacity: [0.7, 1],
                        duration: 500,
                        delay: anime.stagger(100)
                    });
                });
            });

            function getStatusBadge(value, threshold, isProduction) {
                if (isProduction) {
                    const percentage = (value / threshold) * 100;
                    if (percentage >= 90) {
                        return '<span class="badge bg-success"><i class="fas fa-check-circle me-1"></i>Adequate</span>';
                    } else if (percentage >= 70) {
                        return '<span class="badge bg-warning"><i class="fas fa-exclamation-circle me-1"></i>Moderate</span>';
                    } else {
                        return '<span class="badge bg-danger"><i class="fas fa-times-circle me-1"></i>Low</span>';
                    }
                } else {
                    if (value >= 300) {
                        return '<span class="badge bg-success"><i class="fas fa-check-circle me-1"></i>Adequate</span>';
                    } else if (value >= 150) {
                        return '<span class="badge bg-warning"><i class="fas fa-exclamation-circle me-1"></i>Low</span>';
                    } else {
                        return '<span class="badge bg-danger"><i class="fas fa-times-circle me-1"></i>Critical</span>';
                    }
                }
            }

            // Real-time updates with dynamic data
            setInterval(() => {
                const selectedYear = financialYearSelect.value;
                const period = document.querySelector('.dashboard-card:nth-child(1) .btn-primary')?.id === 'monthly-btn' ? 'monthly' : document.querySelector('.dashboard-card:nth-child(1) .btn-primary')?.id === 'quarterly-btn' ? 'quarterly' : 'yearly';
                const salesType = document.querySelector('.dashboard-card:nth-child(2) .btn-primary')?.id === 'quantity-btn' ? 'quantity' : 'revenue';
                const orderType = document.querySelector('.dashboard-card:nth-child(3) .btn-primary')?.id === 'by-department-btn' ? 'byDepartment' : 'bySelf';
                const finishedToggle = document.getElementById('finished-toggle-btn')?.dataset.toggle || 'top';
                const emporiumToggle = document.getElementById('emporium-toggle-btn')?.dataset.toggle || 'top';

                // Update KPI values
                const newProductionValue = Math.max(710, Math.min(710, dataByFinancialYear[selectedYear].kpi.productionValue + (Math.random() * 50 - 25)));
                animateValue('production-value', parseInt(document.getElementById('production-value')?.textContent.replace(/,/g, '') || '0'), Math.floor(newProductionValue), 1500);
                const newSalesValue = Math.max(292, Math.min(292, dataByFinancialYear[selectedYear].kpi.salesValue + (Math.random() * 20 - 10)));
                animateValue('sales-value', parseInt(document.getElementById('sales-value')?.textContent.replace(/,/g, '') || '0'), Math.floor(newSalesValue), 1500);
                const newOrdersValue = Math.max(5, Math.min(5, dataByFinancialYear[selectedYear].kpi.ordersValue + (Math.random() * 20 - 10)));
                animateValue('orders-value', parseInt(document.getElementById('orders-value')?.textContent.replace(/,/g, '') || '0'), Math.floor(newOrdersValue), 1500);
                const newStockValue = Math.max(1064, Math.min(1064, dataByFinancialYear[selectedYear].kpi.stockValue + (Math.random() * 50 - 25)));
                animateValue('stock-value', parseInt(document.getElementById('stock-value')?.textContent.replace(/,/g, '') || '0'), Math.floor(newStockValue), 1500);

                // Update chart data
                const finishedDataKey = finishedToggle === 'top' ? 'finishedProducts' : 'belowFinishedProducts';
                dataByFinancialYear[selectedYear][finishedDataKey][period].data = dataByFinancialYear[selectedYear][finishedDataKey][period].data.map(value =>
                    Math.max(value * 0.8, Math.min(value * 1.2, value + (Math.random() * value * 0.1 - value * 0.05)))
                );
                const emporiumDataKey = emporiumToggle === 'top' ? 'emporiumSales' : 'belowEmporiumSales';
                dataByFinancialYear[selectedYear][emporiumDataKey][salesType].data = dataByFinancialYear[selectedYear][emporiumDataKey][salesType].data.map(value =>
                    Math.max(value * 0.8, Math.min(value * 1.2, value + (Math.random() * value * 0.1 - value * 0.05)))
                );
                dataByFinancialYear[selectedYear].orderVsSupply[orderType].data = dataByFinancialYear[selectedYear].orderVsSupply[orderType].data.map(value =>
                    Math.max(value * 0.8, Math.min(value * 1.2, value + (Math.random() * value * 0.1 - value * 0.05)))
                );

                if (finishedProductsChart) {
                    finishedProductsChart.data.labels = dataByFinancialYear[selectedYear][finishedDataKey][period].labels;
                    finishedProductsChart.data.datasets[0].data = dataByFinancialYear[selectedYear][finishedDataKey][period].data;
                    finishedProductsChart.data.datasets[0].label = finishedToggle === 'top' ? 'Quantity Produced (kg)' : 'Production (Lakhs)';
                    finishedProductsChart.options.scales.y.title.text = finishedToggle === 'top' ? 'Quantity (Nos)' : 'Production (Lakhs)';
                    finishedProductsChart.update();
                }

                if (emporiumSalesChart) {
                    emporiumSalesChart.data.labels = dataByFinancialYear[selectedYear][emporiumDataKey][salesType].labels;
                    emporiumSalesChart.data.datasets[0].data = dataByFinancialYear[selectedYear][emporiumDataKey][salesType].data;
                    emporiumSalesChart.update();
                }

                if (ordervssupplyChart) {
                    ordervssupplyChart.data.datasets[0].data = dataByFinancialYear[selectedYear].orderVsSupply[orderType].data;
                    ordervssupplyChart.update();
                    const totalOrders = dataByFinancialYear[selectedYear].orderVsSupply[orderType].data.reduce((a, b) => a + b, 0);
                    animateValue('total-orders', parseInt(document.getElementById('total-orders').textContent.replace(/,/g, '') || '0'), Math.round(totalOrders), 1000);
                }

                // Update Plant Table
                const tableRows = plantTableBody?.querySelectorAll('tr') || [];
                const isProductionView = document.querySelector('#production-btn')?.classList.contains('btn-primary') || false;

                tableRows.forEach(row => {
                    const cells = row.querySelectorAll('td');
                    if (cells.length < 5) return;
                    let production = parseInt(cells[1].textContent) || 0;
                    let stock = parseInt(cells[3].textContent) || 0;

                    production = Math.max(production * 0.9, Math.min(production * 1.1, production + (Math.random() * 100 - 50)));
                    stock = Math.max(stock * 0.9, Math.min(stock * 1.1, stock + (Math.random() * 50 - 25)));

                    cells[1].textContent = Math.round(production);
                    cells[3].textContent = Math.round(stock);

                    const capacity = parseInt(cells[2].textContent) || 1;
                    cells[4].innerHTML = isProductionView
                        ? getStatusBadge(production, capacity, true)
                        : getStatusBadge(stock, 400, false);
                });

                anime({
                    targets: ['#finishedProductsChart', '#emporiumSalesChart', '#ordervssupplyChart', '#plant-table'],
                    scale: [0.98, 1],
                    opacity: [0.9, 1],
                    duration: 1000
                });
            }, 15000);
        });
    </script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</ht